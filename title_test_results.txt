--- Starting Title Visibility Test ---
\n--- I. Database Setup ---
2025-06-13 20:58:03,182 - app - INFO - Flask application logger explicitly configured for checklist debugging.
INFO:app:Flask application logger explicitly configured for checklist debugging.
2025-06-13 20:58:03,184 - app - INFO - Ensured database directory exists: /app/instance
INFO:app:Ensured database directory exists: /app/instance
2025-06-13 20:58:03,184 - app - INFO - Ensured report directory exists: /app/reports
INFO:app:Ensured report directory exists: /app/reports
2025-06-13 20:58:03,184 - app - INFO - Ensured drawing directory exists: static/drawings
INFO:app:Ensured drawing directory exists: static/drawings
2025-06-13 20:58:03,184 - app - INFO - Using SQLALCHEMY_DATABASE_URI: sqlite:////app/instance/myapp.db
INFO:app:Using SQLALCHEMY_DATABASE_URI: sqlite:////app/instance/myapp.db
2025-06-13 20:58:03,184 - app - INFO - Ensured upload directory exists: static/images
INFO:app:Ensured upload directory exists: static/images
2025-06-13 20:58:03,246 - app - INFO - Checking database tables...
INFO:app:Checking database tables...
2025-06-13 20:58:03,254 - app - INFO - Existing tables: ['attachments', 'checklist_items', 'checklists', 'comments', 'defect_markers', 'defects', 'drawings', 'project_access', 'projects', 'template_items', 'templates', 'users']
INFO:app:Existing tables: ['attachments', 'checklist_items', 'checklists', 'comments', 'defect_markers', 'defects', 'drawings', 'project_access', 'projects', 'template_items', 'templates', 'users']
2025-06-13 20:58:03,254 - app - INFO - Required tables: ['users', 'project_access', 'projects', 'defects', 'comments', 'attachments', 'templates', 'template_items', 'checklists', 'checklist_items', 'drawings', 'defect_markers']
INFO:app:Required tables: ['users', 'project_access', 'projects', 'defects', 'comments', 'attachments', 'templates', 'template_items', 'checklists', 'checklist_items', 'drawings', 'defect_markers']
2025-06-13 20:58:03,254 - app - INFO - All required tables already exist, skipping creation.
INFO:app:All required tables already exist, skipping creation.
--- MAIL CONFIGURATION ---
MAIL_SERVER: smtp.example.com
MAIL_PORT: 587
MAIL_USE_TLS: True
MAIL_USERNAME: your-email@example.com
MAIL_PASSWORD loaded: Yes
--------------------------
--- Starting Setup for Title Visibility Test ---
User testadmin exists. Ensured role admin and status active.
User testexpert exists. Ensured role expert and status active.
Created project: Project_TitleTest_MA (ID: 7)
Granted testadmin admin access to new project Project_TitleTest_MA
Granted testexpert expert access to Project_TitleTest_MA
--- Title Visibility Test Setup Complete ---
Setup script finished.
\n--- II. Test Execution ---
Starting Flask server...
Flask PID: 9429
\n  A. Logged in as testadmin:
    1. Logging in as testadmin...
{"message":"User testadmin logged in.","status":"success"}

    2. Fetching /manage_access page...
    3. Verification (Title IS PRESENT):
      RESULT: PASS - Title IS PRESENT for testadmin.
\n  B. Logged in as testexpert:
    1. Logging in as testexpert...
{"message":"User testexpert logged in.","status":"success"}

    2. Fetching /manage_access page...
    3. Verification (Title IS ABSENT):
      RESULT: PASS - Title IS ABSENT for testexpert.
    4. Verification (Context Check - 'Current User Access' IS PRESENT):
      RESULT: PASS - Context string 'Current User Access' IS PRESENT for testexpert.
\n--- Stopping Flask Server ---
Flask server should be stopped.
